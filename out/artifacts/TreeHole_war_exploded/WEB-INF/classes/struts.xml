<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>

    <!-- 请求参数的编码方式 -->
    <constant name="struts.i18n.encoding" value="UTF-8"/>
    <!-- 当struts.xml改动后，是否重新加载。默认值为false(生产环境下使用),开发阶段最好打开  -->
    <constant name="struts.configuration.xml.reload" value="true"/>
    <!-- 是否使用struts的开发模式。开发模式会有更多的调试信息。默认值为false(生产环境下使用),开发阶段最好打开  -->
    <constant name="struts.devMode" value="false"/>
    <!-- 设置浏览器是否缓存静态内容。默认值为true(生产环境下使用),开发阶段最好关闭  -->
    <constant name="struts.serve.static.browserCache" value="false"/>
    <!-- 指定由spring负责action对象的创建-->
    <constant name="struts.objectFactory" value="spring"/>


    <!-- 是否支持action name中存在斜杠-->
    <!--<constant name="struts.enable.SlashesInActionNames" value="true"/>-->

    <package name="base" extends="json-default,struts-default">
        <!-- 这里可以设置一些全局的返回值映射关系等 -->
        <global-results>
            <result name="databaseError" type="redirect">/db_err.html</result>
            <result name="error" type="redirect">/db_err.html</result>
            <result name="login" type="redirect">/login.html</result>
        </global-results>

        <!--<global-exception-mappings>-->
        <!--<exception-mapping exception="java.lang.Exception" result="/error.jsp"></exception-mapping>-->
        <!--</global-exception-mappings>-->
    </package>

    <!--需要检查用户是否登陆，自定义拦截栈-->
    <package name="loginCheck" extends="base">
        <interceptors>
            <!--自定义拦截器-->
            <interceptor name="checkLogin" class="me.superlee.v1.interceptor.LoginInterceptor"/>
            <!--自定义拦截器栈，一定要ref defaultStack-->
            <interceptor-stack name="checkLoginStack">
                <interceptor-ref name="defaultStack"/>
                <interceptor-ref name="checkLogin"/>
            </interceptor-stack>
        </interceptors>
    </package>

    <!--定义包内默认拦截栈，继承此包每个action默认添加该拦截栈-->
    <package name="login" extends="loginCheck">
        <default-interceptor-ref name="checkLoginStack"/>
    </package>
</struts>