<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="/css/common.style.css">
    <link rel="stylesheet" href="/css/libs/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/moodPoster.util.css">
    <script type="text/javascript" src="/js/libs/jquery-2.1.3.min.js"></script>
    <script src="/js/libs/bootstrap.min.js"></script>
    <script type="text/javascript" src="/js/common.util.js"></script>
    <!--<script type="text/javascript" src="/js/user-data-example.js"></script>-->
    <style type="text/css">
        * {
            color: #333;
        }

        body {
            background-color: #B4DAF0;
        }
    </style>
    <script type="text/javascript">
        $(document).ready(function () {
            getMoodPosterData();
            getPostImgPreviewData();

        });

        function getMoodPosterData(pageNo) {
            //生成说说内容
            $.post('/moodPoster/listAllMoodPoster', {
                pageNo: pageNo || 1
            }, function (data, textStatus, xhr) {
                if (typeof data == "object") {
                    createMoodPoster(data);
                    return;
                }
                window.location.href = "/login.html";

            });
//                createMoodPoster(mood_poster_data);
        }
    </script>
</head>
<body>
<div class="me-tipbox-ui" id="me-tipbox"></div>
<!--时间轴标题界面-->
<div class="ui-dialog" id="dialog">
    <div class="ui-dialog-title" id="dialog-title">
        时间轴坐标
        <a href="javascript:hideDialog()" class="ui-dialog-title-closebutton"></a>
    </div>
    <div class="ui-dialog-content">
        <p>每一则值得珍藏的心情都应该有一个值得纪念的坐标，为你的这则珍藏起个名字吧</p>
        <div class="ui-dialog-form">
            <input type="text" name="mood_title" placeholder="请输入心情名字"/>
            <input type="hidden" name="mood_id">
        </div>
        <div>
            <a class="ui-dialog-submit" href="javascript:addToTimeLineStory()">确定</a>
        </div>
    </div>
</div>
<div class="ui-mask" id="mask" onselectstart="return false">
</div>
<nav class="navbar navbar-inverse">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/index.html">树洞</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li><a href="/index.html">首页</a></li>
                <li class="active"><a href="#find">发现</a></li>
                <!--<li><a href="#more">更多</a></li>-->
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false">更多 <span class="caret" style="color:#fff;"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="/profile.html">个人信息</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="/user/signOut">退出</a></li>
                    </ul>
                </li>
            </ul>
            <form class="navbar-form navbar-right" role="search">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="请输入想搜索的内容">
                </div>
                <button type="submit" class="btn btn-default">搜索</button>
            </form>
        </div>
        <!--/.nav-collapse -->

    </div>
</nav>

<div class="container">

    <div class="row">
        <div class="col-xs-12 col-md-1" style="width:0px;height:30px;"></div>
        <div class="col-xs-12 col-md-10">
            <!-- 说说模块 -->
            <!-- 发表说说模块 -->
            <div class="mood-poster-publish-ui">
                <textarea class="" rows="3" id="mood-poster-content" placeholder="涓涓心事，说给自己听"></textarea>

                <div class="mood-poster-publish-item">
                    <div class="left-item left">
                        <i class="btn-icon-ui btn-emoji-ui"></i>
                        <i class="btn-icon-ui btn-at-ui"></i>
                        <i class="btn-icon-ui btn-img-ui" id="btn-img"></i>
                    </div>
                    <div class="btn right-item right " id="btn-send">
                        发表
                    </div>
                </div>
                <div class="mood-poster-img-upload" id="mood-poster-img-upload">
                    <!-- 向此处添加img元素，src为返回图片路径 -->
                    <div class="img-box" id="img-preview-box">
                        <!--<img src="/assets/imgs/bg5.jpg">-->
                    </div>

                    <!-- 图片上传区域 -->
                    <div class="upImg-area " id="upImg-area">+</div>
                    <input type="file" id="imgFile" accept="image/gif,image/jpeg,image/png" style="display:none"/>
                </div>
            </div>

            <!-- 浏览说说模块 -->
            <div class="mood-poster-browse-ui" id="mood_poster_module"></div>
        </div>
    </div>


    <!-- 模版区域 -->
    <div class="hide">
        <!--浏览说说模块模版，包括说说与页面-->
        <div id="tpl_mood_poster_module">
            <ul>
                {{mood_poster_list}}
            </ul>

            <!-- 底部分页栏 -->
            <nav class="text-right">
                <ul class="pagination">
                    <li>
                        <a href="#" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    {{mood_poster_page_list}}
                    <li>
                        <a href="#" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <!-- 分页栏结束 -->
        </div>
        <div id="tpl_mood_poster">
            <li class="mood-poster-item-ui">
                <div class="mood-poster-item-head">
                    <div class="poster-user-photo">
                        <!--<img src="{{mood_poster_user_photo}}" alt="">-->
                        {{img_mood_poster_user_photo}}
                    </div>
                    <div class="poster-inform">
                        <p><a href="" style="color:#000">{{mood_poster_user_name}}</a></p>

                        <p>
                            <span class="poster-time">{{mood_poster_time}}</span>
                            <span class="poster-view"><i class="glyphicon glyphicon-eye-open"></i>浏览({{mood_poster_total_view}})</span>
                        </p>
                    </div>
                </div>
                <div class="mood-poster-item-middle">
                    <div class="mood-poster-item-content">
                        {{mood_poster_content}}
                    </div>
                    <div class="mood-poster-item-image">
                        {{mood_poster_picture_list}}
                    </div>
                </div>
                <div class="mood-poster-item-foot">
                    <div class="mood-poster-item-foot-ctrlgroup">
                        <!-- TODO:完成收藏等后台action以及点过之后图片变化 -->
                        <a href="javascript:;" class="mood-poster-item-foot-ctrl" data-role='comment'>
                            <i class="mood-poster-ui-icon mood-poster-commit-icon"></i>
                            <span>评论</span>
                        </a>
                        <span class="item-line"></span>
                        <a href="javascript:;" class="mood-poster-item-foot-ctrl" data-mid="{{mood_poster_id}}">
                            <i class="mood-poster-ui-icon mood-poster-forward-icon"></i>
                            <span>转发</span>
                        </a>
                        <span class="item-line"></span>
                        <a href="javascript:;" class="mood-poster-item-foot-ctrl" data-mid="{{mood_poster_id}}"
                           data-isLike="{{current_user_like}}" data-action="like">
                            <i class="mood-poster-ui-icon mood-poster-praise-icon"></i>
                            <span class="like-content">{{like_content}}</span><span
                                class="like-count">{{like_count}}</span>
                        </a>
                        <span class="item-line"></span>
                        <a href="javascript:;" class="mood-poster-item-foot-ctrl" data-mid="{{mood_poster_id}}"
                           data-isCollect="{{current_user_collect}}" data-action="collect">
                            <i class="mood-poster-ui-icon mood-poster-collect-icon"></i>
                            <span class="collection-content">{{collection_content}}</span>
                        </a>
                        <span class="item-line"></span>
                        <a href="javascript:;" class="mood-poster-item-foot-ctrl">
                            <i class="mood-poster-ui-icon mood-poster-more-icon"></i>
                            <div class="mood-poster-ctrl-more">
                                {{mood_poster_more_ctrl}}
                            </div>
                        </a>
                    </div>
                    <!-- 评论区域 -->
                    <div class="mood-poster-item-comment-list">
                        {{mood_poster_comment_list}}
                    </div>
                    <!-- 发表评论区域 -->
                    <div class="mood-poster-comment-ui">
                        <textarea class="" rows="1" placeholder="说两句吧" data-mid="{{mood_poster_id}}"></textarea>

                        <div class="mood-poster-publish-item hide">
                            <div class="left-item left">
                                <i class="btn-icon-ui btn-emoji-ui"></i>
                                <i class="btn-icon-ui btn-at-ui"></i>
                                <!-- TODO:2.缺少一个样式 -->
                                <i class="btn--ui"></i>
                            </div>
                            <div class="btn right-item right btn-comment">
                                发表
                            </div>
                        </div>
                    </div>
                </div>
            </li>
        </div>
        <!-- 说说部分图片模版 -->
        <!--<div id="tpl_mood_poster_picture">-->
            <!--<img src="{{mood_poster_picture}}">-->
        <!--</div>-->
        <!--发表说说部分图片预览模版-->
        <div id="tpl_img_preview_box">
            <div class="img-box-item" id="img-preview-{{id}}">
                <!--<img src="{{img_preview_path}}">-->
                {{img_preview}}
                <a href="#" class="img-item-del"
                   onclick="removeFromImgPreViewBox('{{img_preview_path}}','#img-preview-{{id}}');return false;">
                    <i class="btn-del-ui"></i>
                </a>
            </div>
        </div>
        <!-- 评论部分模版 -->
        <div id="tpl_mood_poster_comment">
            <div class="{{class_ui_by_role}}" data-role="{{data_role}}" data-parentId="{{parent_id}}">
                <!--<img src="{{commenter_photo}}">-->
                {{img_commenter_photo}}

                <div class="mood-poster-comment-item-content">
                    <p class="comment-content"><a href="javascript:;">{{commenter_name}}:</a>{{comment_content}}</p>

                    <p>
                        <span class="poster-time">{{comment_time}}</span>
                        <a href="javascript:;" class="mood-poster-ui-icon comment-reply-icon" data-role="reply"
                           data-cid="{{comment_id}}">
                            <b class="hide-clip">回复
                                <b class="arrow-down"></b>
                            </b>
                        </a>
                    </p>
                </div>
            </div>
        </div>

        <!-- 分页模版 -->
        <div id="tpl_mood_poster_page">
            <li class="{{page_class}}"><a href="#" onclick="getMoodPosterData({{page_num}})">{{page_num}}</a></li>
        </div>
        <!-- 说说区域更多按钮模版 -->
        <div id="tpl_mood_poster_more_ctrl">
            <ul>
                <li onclick="deleteMoodPoster({{moodPoster_id}})">
                    <i class="mood-poster-ui-icon mood-poster-delete-icon"></i>
                    <span>删除</span>
                </li>
                <li onclick="showTimeLineDialog({{moodPoster_id}})">
                    <i class="mood-poster-ui-icon mood-poster-timeline-icon"></i>
                    <span>时间轴</span>
                </li>
            </ul>
        </div>
    </div>
</div>

<script type="text/javascript" src="/js/moodPoster.util.js"></script>
</body>
</html>
